import{H as p,r as l,j as n,I as u}from"./sX_wM5Ua.js";import{r as y}from"./BHIvy5Tm.js";const S=p("settings",()=>{const e=l({defaultDeviceIcon:null,defaultRemote:null,theme:"light",language:"ru",notifications:!0,autoSync:!0,systemName:"Диагностика ТВ-приставок",maxSteps:15,defaultLanguage:"ru",sessionTimeout:30,enableOperatorMode:!0,enableAnalytics:!0,enableDetailedLogging:!1}),a=l(!1),o=l(null),i=async()=>{a.value=!0;try{const t=await $fetch("/api/admin/settings");t&&(e.value={...e.value,...t},o.value=new Date)}catch(t){console.error("Failed to load settings:",t)}finally{a.value=!1}},r=async t=>{a.value=!0;try{const s=await $fetch("/api/admin/settings",{method:"POST",body:t||e.value});if(s.success)return e.value={...e.value,...s.settings},o.value=new Date,await y("devices"),{success:!0,message:s.message}}catch(s){return console.error("Failed to save settings:",s),{success:!1,message:"Ошибка сохранения настроек"}}finally{a.value=!1}},c=t=>{e.value.defaultDeviceIcon=t},d=t=>{e.value.defaultRemote=t},g=n(()=>e.value.defaultDeviceIcon),f=n(()=>e.value.defaultRemote),m=n(()=>e.value.theme),v=n(()=>e.value.systemName);return{settings:u(e),isLoading:u(a),lastUpdated:u(o),loadSettings:i,saveSettings:r,updateDeviceIcon:c,updateDefaultRemote:d,getDefaultDeviceIcon:g,getDefaultRemote:f,getTheme:m,getSystemName:v}});export{S as u};
