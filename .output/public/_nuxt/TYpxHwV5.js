import{_ as F}from"./D4a6TBNS.js";import{k as E,r as x,j as L,u as z,c as i,a as t,h as $,x as p,y as b,g as s,z as q,F as w,m as h,D as V,t as l,C as N,B as A,o as d,b as H,w as I,d as P}from"./sX_wM5Ua.js";import{u as U}from"./bGbag7Rw.js";import"./BHIvy5Tm.js";import"./DTcQ41cH.js";const K={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},O={class:"flex justify-between items-center mb-8"},R={class:"mb-6"},W=["value"],G={class:"card overflow-hidden"},J={class:"overflow-x-auto"},Q={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},X={class:"bg-white dark:bg-dark-100 divide-y divide-gray-200 dark:divide-gray-700"},Y={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},Z={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},tt={class:"flex items-center space-x-2"},et={class:"text-lg"},rt={key:0,class:"px-2 py-1 text-xs bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100 rounded-full"},st={key:1,class:"px-2 py-1 text-xs bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100 rounded-full"},ot={key:2,class:"px-2 py-1 text-xs bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100 rounded-full"},at={class:"px-6 py-4 text-sm text-gray-600 dark:text-gray-400"},it={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400"},dt={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},lt={class:"flex justify-end space-x-2"},nt=["onClick"],ut=["onClick"],pt={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},mt={class:"inline-block align-bottom bg-white dark:bg-dark-100 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},xt={class:"bg-white dark:bg-dark-100 px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},yt={class:"text-lg leading-6 font-medium text-gray-900 dark:text-white mb-4"},ct={class:"space-y-4"},gt=["value"],bt={class:"grid grid-cols-2 gap-4"},vt={class:"bg-gray-50 dark:bg-gray-800 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},ft=["disabled"],$t={__name:"errors",async setup(kt){let n,y;const{data:v}=([n,y]=E(()=>U("/api/devices","$CwhKpIua1A")),n=await n,y(),n),{data:_,refresh:C}=([n,y]=E(()=>U("/api/errors/all","$f7c1uWTHgr")),n=await n,y(),n),m=x(""),f=x(!1),u=x(null),c=x(!1),a=x({device_id:"",title:"",description:"",icon:"âš ï¸",severity:"medium"}),D=L(()=>m.value?_.value.filter(o=>o.device_id==m.value):_.value),T=o=>{var g;const e=(g=v.value)==null?void 0:g.find(r=>r.id===o);return e?e.name:"ĞĞµĞ¸Ğ·Ğ²ĞµÑÑ‚Ğ½Ğ¾"},M=o=>{u.value=o,a.value={device_id:o.device_id,title:o.title,description:o.description,icon:o.icon||"âš ï¸",severity:o.severity||"medium"}},k=()=>{f.value=!1,u.value=null,a.value={device_id:"",title:"",description:"",icon:"âš ï¸",severity:"medium"}},S=async()=>{c.value=!0;try{u.value?await $fetch(`/api/admin/error/${u.value.id}`,{method:"PUT",body:a.value}):await $fetch("/api/admin/error",{method:"POST",body:a.value}),await C(),k()}catch(o){console.error("Error saving error:",o),alert("ĞÑˆĞ¸Ğ±ĞºĞ° Ğ¿Ñ€Ğ¸ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğ¸ Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸")}c.value=!1},j=async o=>{if(confirm(`Ğ’Ñ‹ ÑƒĞ²ĞµÑ€ĞµĞ½Ñ‹, Ñ‡Ñ‚Ğ¾ Ñ…Ğ¾Ñ‚Ğ¸Ñ‚Ğµ ÑƒĞ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ğ¾ÑˆĞ¸Ğ±ĞºÑƒ "${o.title}"?`))try{await $fetch(`/api/admin/error/${o.id}`,{method:"DELETE"}),await C()}catch(e){console.error("Error deleting error:",e),alert("ĞÑˆĞ¸Ğ±ĞºĞ° Ğ¿Ñ€Ğ¸ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ğ¸ Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸")}};return z({title:"Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¾ÑˆĞ¸Ğ±ĞºĞ°Ğ¼Ğ¸ - ĞĞ´Ğ¼Ğ¸Ğ½-Ğ¿Ğ°Ğ½ĞµĞ»ÑŒ"}),(o,e)=>{const g=F;return d(),i("div",K,[t("div",O,[e[8]||(e[8]=t("div",null,[t("h1",{class:"text-3xl font-bold text-gray-900 dark:text-white"},"Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¾ÑˆĞ¸Ğ±ĞºĞ°Ğ¼Ğ¸"),t("p",{class:"mt-2 text-gray-600 dark:text-gray-400"}," ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹Ñ‚ï¿½ï¿½ Ñ‚Ğ¸Ğ¿Ñ‹ Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº Ğ´Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¹ Ğ¿Ñ€Ğ¸ÑÑ‚Ğ°Ğ²ĞºĞ¸ ")],-1)),t("button",{onClick:e[0]||(e[0]=r=>f.value=!0),class:"btn-primary"}," + Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¾ÑˆĞ¸Ğ±ĞºÑƒ ")]),t("div",R,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€ Ğ¿Ğ¾ Ğ¿Ñ€Ğ¸ÑÑ‚Ğ°Ğ²ĞºĞµ ",-1)),p(t("select",{"onUpdate:modelValue":e[1]||(e[1]=r=>q(m)?m.value=r:null),class:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white"},[e[9]||(e[9]=t("option",{value:""},"Ğ’ÑĞµ Ğ¿Ñ€Ğ¸ÑÑ‚Ğ°Ğ²ĞºĞ¸",-1)),(d(!0),i(w,null,h(s(v),r=>(d(),i("option",{key:r.id,value:r.id},l(r.name),9,W))),128))],512),[[b,s(m)]])]),t("div",G,[e[13]||(e[13]=t("div",{class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},[t("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"}," Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº ")],-1)),t("div",J,[t("table",Q,[e[12]||(e[12]=t("thead",{class:"bg-gray-50 dark:bg-gray-800"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," ĞŸÑ€Ğ¸ÑÑ‚Ğ°Ğ²ĞºĞ° "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," ĞÑˆĞ¸Ğ±ĞºĞ° "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Ğ¨Ğ°Ğ³Ğ¸ "),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Ğ”ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ ")])],-1)),t("tbody",X,[(d(!0),i(w,null,h(s(D),r=>(d(),i("tr",{key:r.id},[t("td",Y,l(T(r.device_id)),1),t("td",Z,[t("div",tt,[t("span",et,l(r.icon||"âš ï¸"),1),t("span",null,l(r.title),1),r.severity==="high"?(d(),i("span",rt," Ğ’Ñ‹ÑĞ¾ĞºĞ¸Ğ¹ ")):r.severity==="medium"?(d(),i("span",st," Ğ¡Ñ€ĞµĞ´Ğ½Ğ¸Ğ¹ ")):r.severity==="low"?(d(),i("span",ot," ĞĞ¸Ğ·ĞºĞ¸Ğ¹ ")):$("",!0)])]),t("td",at,l(r.description),1),t("td",it,l(r.step_count||0)+" ÑˆĞ°Ğ³Ğ¾Ğ² ",1),t("td",dt,[t("div",lt,[H(g,{to:`/admin/steps?error=${r.id}`,class:"text-primary-600 hover:text-primary-900 transition-colors"},{default:I(()=>e[11]||(e[11]=[P(" Ğ¨Ğ°Ğ³Ğ¸ ")])),_:2,__:[11]},1032,["to"]),t("button",{onClick:B=>M(r),class:"text-blue-600 hover:text-blue-900 transition-colors"}," Ğ˜Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ ",8,nt),t("button",{onClick:B=>j(r),class:"text-red-600 hover:text-red-900 transition-colors"}," Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ ",8,ut)])])]))),128))])])])]),s(f)||s(u)?(d(),i("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto",onClick:k},[t("div",pt,[e[22]||(e[22]=t("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1)),t("div",mt,[t("form",{onSubmit:V(S,["prevent"]),onClick:e[7]||(e[7]=V(()=>{},["stop"]))},[t("div",xt,[t("h3",yt,l(s(u)?"Ğ ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¾ÑˆĞ¸Ğ±ĞºÑƒ":"Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¾ÑˆĞ¸Ğ±ĞºÑƒ"),1),t("div",ct,[t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," ĞŸÑ€Ğ¸ÑÑ‚Ğ°Ğ²ĞºĞ° ",-1)),p(t("select",{"onUpdate:modelValue":e[2]||(e[2]=r=>s(a).device_id=r),required:"",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white"},[e[14]||(e[14]=t("option",{value:""},"Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ğ¿Ñ€Ğ¸ÑÑ‚Ğ°Ğ²ĞºÑƒ",-1)),(d(!0),i(w,null,h(s(v),r=>(d(),i("option",{key:r.id,value:r.id},l(r.name),9,gt))),128))],512),[[b,s(a).device_id]])]),t("div",null,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸ ",-1)),p(t("input",{"onUpdate:modelValue":e[3]||(e[3]=r=>s(a).title=r),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white",placeholder:"ĞĞ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€: ĞĞµÑ‚ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ°"},null,512),[[N,s(a).title]])]),t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ ",-1)),p(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=r=>s(a).description=r),rows:"3",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white",placeholder:"ĞŸĞ¾Ğ´Ñ€Ğ¾Ğ±Ğ½Ğ¾Ğµ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹"},null,512),[[N,s(a).description]])]),t("div",bt,[t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Ğ˜ĞºĞ¾Ğ½ĞºĞ° ",-1)),p(t("select",{"onUpdate:modelValue":e[5]||(e[5]=r=>s(a).icon=r),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white"},e[18]||(e[18]=[A('<option value="âš ï¸">âš ï¸ ĞŸÑ€ĞµĞ´ÑƒĞ¿Ñ€ĞµĞ¶Ğ´ĞµĞ½Ğ¸Ğµ</option><option value="ğŸ“µ">ğŸ“µ ĞĞµÑ‚ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ°</option><option value="ğŸ”‡">ğŸ”‡ ĞĞµÑ‚ Ğ·Ğ²ÑƒĞºĞ°</option><option value="ğŸ“º">ğŸ“º Ğ˜Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ</option><option value="ğŸ”Œ">ğŸ”Œ ĞŸĞ¸Ñ‚Ğ°Ğ½Ğ¸Ğµ</option><option value="ğŸ’¾">ğŸ’¾ Ğ—Ğ°Ğ¿Ğ¸ÑÑŒ</option><option value="ğŸŒ">ğŸŒ Ğ˜Ğ½Ñ‚ĞµÑ€Ğ½ĞµÑ‚</option><option value="â„ï¸">â„ï¸ Ğ—Ğ°Ğ²Ğ¸ÑĞ°Ğ½Ğ¸Ğµ</option><option value="ğŸŒ">ğŸŒ ĞœĞµĞ´Ğ»ĞµĞ½Ğ½Ğ¾</option><option value="ğŸ”’">ğŸ”’ Ğ—Ğ°ĞºĞ¾Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¾</option>',10)]),512),[[b,s(a).icon]])]),t("div",null,[e[21]||(e[21]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚ ",-1)),p(t("select",{"onUpdate:modelValue":e[6]||(e[6]=r=>s(a).severity=r),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white"},e[20]||(e[20]=[t("option",{value:"low"},"ĞĞ¸Ğ·ĞºĞ¸Ğ¹",-1),t("option",{value:"medium"},"Ğ¡Ñ€ĞµĞ´Ğ½Ğ¸Ğ¹",-1),t("option",{value:"high"},"Ğ’Ñ‹ÑĞ¾ĞºĞ¸Ğ¹",-1)]),512),[[b,s(a).severity]])])])])]),t("div",vt,[t("button",{type:"submit",disabled:s(c),class:"btn-primary"},l(s(c)?"Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ...":"Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ"),9,ft),t("button",{type:"button",onClick:k,class:"btn-secondary mr-3"}," ĞÑ‚Ğ¼ĞµĞ½Ğ° ")])],32)])])])):$("",!0)])}}};export{$t as default};
