import{_ as dt}from"./D4a6TBNS.js";import{_ as ut}from"./BxAFrtwI.js";import{f as pt,i as gt,j as p,k as C,r as $,e as ht,l as A,u as _t,c as n,a as t,b as j,w as L,g as e,t as a,v as W,h as v,p as vt,F as K,m as U,o as r,d as G}from"./sX_wM5Ua.js";import{u as D}from"./bGbag7Rw.js";import"./DlAUqK2U.js";import"./BHIvy5Tm.js";import"./DTcQ41cH.js";const mt={class:"min-h-screen bg-gradient-to-br from-gray-900 to-black"},xt={class:"bg-gray-800 border-b border-gray-700"},bt={class:"max-w-7xl mx-auto px-4 py-4"},yt={class:"flex items-center space-x-2 text-sm text-gray-400 mb-2"},ft={class:"text-white"},wt={class:"flex items-center justify-between"},kt={class:"text-2xl font-bold text-white mb-1"},It={class:"text-gray-300"},St={class:"flex items-center space-x-4"},Ct={class:"text-white bg-gray-700 px-3 py-2 rounded-lg"},$t={class:"max-w-7xl mx-auto p-4"},jt={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Dt={class:"lg:col-span-2"},Mt={class:"bg-gray-900 rounded-2xl p-6 shadow-2xl border border-gray-700"},Ot={class:"flex items-center justify-between mb-4"},zt={class:"text-xl font-semibold text-white"},Bt={class:"bg-black rounded-xl h-64 lg:h-80 flex items-center justify-center relative overflow-hidden mb-4"},Ft={key:0,class:"w-full h-full"},Pt={key:0,class:"w-full h-full relative"},Rt=["src","alt"],qt={class:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black via-black/80 to-transparent p-4"},Et={class:"text-white text-lg font-semibold mb-1"},Nt={class:"text-gray-300 text-sm"},Tt={key:1,class:"text-center text-white space-y-4 p-8"},Ht={class:"text-2xl lg:text-3xl font-bold"},Vt={class:"text-lg text-gray-300"},At={key:0,class:"bg-blue-900/50 p-3 rounded-lg"},Lt={class:"text-blue-200"},Wt={key:1,class:"text-center text-white space-y-4"},Kt={class:"text-2xl font-bold"},Ut={class:"text-gray-300"},Gt={key:0,class:"mb-4"},Jt={class:"flex items-center justify-between mb-2"},Qt={class:"text-gray-400 text-sm"},Xt={class:"w-full bg-gray-700 rounded-full h-2"},Yt={class:"flex justify-between items-center"},Zt={key:1},te={class:"flex space-x-2"},ee={class:"lg:col-span-1"},se={class:"bg-gray-900 rounded-2xl p-6 shadow-2xl border border-gray-700"},oe={key:0,class:"mb-4 p-3 bg-blue-900/30 border border-blue-700 rounded-lg"},le={class:"text-blue-200 text-sm"},ae={class:"flex justify-center mb-4"},ne={key:1,class:"mb-4"},re={class:"space-y-2"},ie={class:"flex items-center space-x-2"},ce={class:"text-yellow-400"},de={key:0,class:"mt-4 bg-gray-900 rounded-2xl p-4 border border-gray-700"},ue={class:"space-y-2"},pe=["onClick"],ge={class:"flex items-center space-x-2"},he={class:"truncate"},_e={key:0,class:"ml-auto text-green-400"},ve={key:1,class:"ml-auto text-blue-400"},Ce={__name:"[errorId]",async setup(me){let c,y;const M=pt(),J=gt(),_=p(()=>M.params.deviceId),f=p(()=>M.params.errorId),{data:Q}=([c,y]=C(()=>D("/api/devices","$ojM4WnszRq")),c=await c,y(),c),m=p(()=>{var s;return(s=Q.value)==null?void 0:s.find(o=>o.id==_.value)}),{data:X}=([c,y]=C(()=>D(`/api/errors/${_.value}`,"$eUERuzE75z")),c=await c,y(),c),u=p(()=>{var s;return(s=X.value)==null?void 0:s.find(o=>o.id==f.value)}),{data:O}=([c,y]=C(()=>D(`/api/steps/${_.value}/${f.value}`,"$KyzRqWmdPa")),c=await c,y(),c),x=$(!1),i=$(0),k=$([]),d=p(()=>O.value?O.value.filter(s=>x.value||!s.onlyForOperator):[]),l=p(()=>d.value[i.value]||null),Y=p(()=>{var s;return((s=l.value)==null?void 0:s.highlighted_buttons)||[]}),Z=p(()=>d.value.length===0?0:(i.value+1)/d.value.length*100),tt=()=>{x.value=!x.value,i.value=0},S=()=>{i.value<d.value.length-1&&(i.value++,g("step_completed"))},et=()=>{i.value>0&&(i.value--,g("step_back"))},st=s=>{i.value=s,g("step_jump")},ot=()=>{var s;g("step_failed"),(s=l.value)!=null&&s.nextIfFailed&&S()},lt=()=>{g("step_skipped"),S()},at=()=>{var s;g("help_requested"),$fetch("/api/analytics",{method:"POST",body:{type:"help_requested",deviceId:_.value,errorId:f.value,stepId:(s=l.value)==null?void 0:s.id,timestamp:new Date().toISOString()}}).catch(console.error)},nt=()=>{i.value=0,k.value=[],g("diagnostic_restarted")},rt=()=>{g("diagnostic_completed"),$fetch("/api/analytics",{method:"POST",body:{type:"diagnostic_completed",deviceId:_.value,errorId:f.value,stepsCompleted:d.value.length,operatorMode:x.value,timestamp:new Date().toISOString()}}).catch(console.error),alert("üéâ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!")},it=s=>{k.value.includes(s)||k.value.push(s),g("button_pressed",{buttonId:s})},g=(s,o={})=>{var I;const w={type:s,deviceId:_.value,errorId:f.value,stepId:(I=l.value)==null?void 0:I.id,stepIndex:i.value,operatorMode:x.value,timestamp:new Date().toISOString(),...o};$fetch("/api/analytics",{method:"POST",body:w}).catch(console.error),console.log("Step action logged:",w)},ct=()=>{J.back()};return ht(()=>{if(!m.value)throw A({statusCode:404,statusMessage:`–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —Å ID ${_.value} –Ω–µ –Ω–∞–π–¥–µ–Ω–æ`});if(!u.value)throw A({statusCode:404,statusMessage:`–û—à–∏–±–∫–∞ —Å ID ${f.value} –Ω–µ –Ω–∞–π–¥–µ–Ω–∞`})}),_t({title:p(()=>u.value&&m.value?`${u.value.title} - ${m.value.name}`:"–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞"),meta:[{name:"description",content:p(()=>u.value?`–ü–æ—à–∞–≥–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ: ${u.value.description}`:"–°–∏—Å—Ç–µ–º–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –¢–í-–ø—Ä–∏—Å—Ç–∞–≤–æ–∫")}]}),(s,o)=>{var z,B,F,P,R,q,E,N,T,H,V;const w=dt,I=ut;return r(),n("div",mt,[t("div",xt,[t("div",bt,[t("nav",yt,[j(w,{to:"/",class:"hover:text-white"},{default:L(()=>o[0]||(o[0]=[G("–ì–ª–∞–≤–Ω–∞—è")])),_:1,__:[0]}),o[1]||(o[1]=t("span",null,"‚Üí",-1)),j(w,{to:`/remote/${e(_)}`,class:"hover:text-white"},{default:L(()=>{var b;return[G(a((b=e(m))==null?void 0:b.name),1)]}),_:1},8,["to"]),o[2]||(o[2]=t("span",null,"‚Üí",-1)),t("span",ft,a((z=e(u))==null?void 0:z.title),1)]),t("div",wt,[t("div",null,[t("h1",kt," üîß "+a(((B=e(u))==null?void 0:B.title)||"–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞"),1),t("p",It,a((F=e(m))==null?void 0:F.name)+" ‚Ä¢ "+a((P=e(u))==null?void 0:P.description),1)]),t("div",St,[t("button",{onClick:tt,class:W(["px-4 py-2 rounded-lg font-medium transition-colors text-sm",e(x)?"bg-orange-600 text-white hover:bg-orange-700":"bg-gray-600 text-gray-300 hover:bg-gray-500"])},a(e(x)?"üë§ –û–ø–µ—Ä–∞—Ç–æ—Ä":"üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"),3),t("div",Ct," –®–∞–≥ "+a(e(i)+1)+" / "+a(e(d).length),1),t("button",{onClick:ct,class:"btn-secondary"}," ‚Üê –ù–∞–∑–∞–¥ ")])])])]),t("div",$t,[t("div",jt,[t("div",Dt,[t("div",Mt,[t("div",Ot,[t("h2",zt," üì∫ "+a(((R=e(m))==null?void 0:R.name)||"–¢–í —ç–∫—Ä–∞–Ω"),1),o[3]||(o[3]=t("div",{class:"flex items-center space-x-2"},[t("div",{class:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),t("span",{class:"text-green-400 text-sm"},"HD 1080p")],-1))]),t("div",Bt,[e(l)?(r(),n("div",Ft,[e(l).media||e(l).screen_image?(r(),n("div",Pt,[t("img",{src:((q=e(l).media)==null?void 0:q.url)||e(l).screen_image,alt:e(l).title,class:"w-full h-full object-cover rounded-lg"},null,8,Rt),t("div",qt,[t("h3",Et,a(e(l).title),1),t("p",Nt,a(e(l).instruction),1)])])):(r(),n("div",Tt,[t("h3",Ht,a(e(l).title),1),t("p",Vt,a(e(l).instruction),1),e(l).tip?(r(),n("div",At,[t("p",Lt,"üí° "+a(e(l).tip),1)])):v("",!0)]))])):(r(),n("div",Wt,[o[4]||(o[4]=t("div",{class:"text-6xl"},"‚ö†Ô∏è",-1)),t("h3",Kt,a((E=e(u))==null?void 0:E.title),1),t("p",Ut,a((N=e(u))==null?void 0:N.description),1)]))]),e(d).length>0?(r(),n("div",Gt,[t("div",Jt,[o[5]||(o[5]=t("span",{class:"text-white text-sm"},"–ü—Ä–æ–≥—Ä–µ—Å—Å —Ä–µ—à–µ–Ω–∏—è",-1)),t("span",Qt,a(e(i)+1)+" –∏–∑ "+a(e(d).length),1)]),t("div",Xt,[t("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-500",style:vt({width:`${e(Z)}%`})},null,4)])])):v("",!0),t("div",Yt,[e(i)>0?(r(),n("button",{key:0,onClick:et,class:"px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors"}," ‚Üê –ü—Ä–µ–¥—ã–¥—É—â–∏–π ")):(r(),n("div",Zt)),t("div",te,[(T=e(l))!=null&&T.nextIfFailed?(r(),n("button",{key:0,onClick:ot,class:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors"}," ‚ùå –ù–µ –ø–æ–º–æ–≥–ª–æ ")):v("",!0),e(i)<e(d).length-1?(r(),n("button",{key:1,onClick:S,class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors"}," ‚úÖ –ì–æ—Ç–æ–≤–æ ")):e(l)?(r(),n("button",{key:2,onClick:rt,class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"}," üéâ –ó–∞–≤–µ—Ä—à–∏—Ç—å ")):v("",!0)])])])]),t("div",ee,[t("div",se,[o[7]||(o[7]=t("div",{class:"text-center mb-4"},[t("h2",{class:"text-xl font-semibold text-white mb-2"}," üéÆ –ü—É–ª—å—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è "),t("p",{class:"text-gray-400 text-sm"}," –°–ª–µ–¥—É–π—Ç–µ –ø–æ–¥—Å–∫–∞–∑–∫–∞–º –Ω–∏–∂–µ ")],-1)),(H=e(l))!=null&&H.tip?(r(),n("div",oe,[t("p",le," üí° "+a(e(l).tip),1)])):v("",!0),t("div",ae,[j(I,{device:e(m),"highlighted-buttons":e(Y),"completed-actions":e(k),onButtonPress:it},null,8,["device","highlighted-buttons","completed-actions"])]),(V=e(l))!=null&&V.actions&&e(l).actions.length>0?(r(),n("div",ne,[o[6]||(o[6]=t("h4",{class:"text-white font-medium mb-2"},"–î–µ–π—Å—Ç–≤–∏—è:",-1)),t("div",re,[(r(!0),n(K,null,U(e(l).actions,(b,h)=>(r(),n("div",{key:h,class:"p-2 bg-gray-800 rounded text-sm text-gray-300"},[t("div",ie,[t("span",ce,a(h+1)+".",1),t("span",null,a(b.description),1)])]))),128))])])):v("",!0),t("div",{class:"space-y-2"},[t("button",{onClick:lt,class:"w-full p-2 bg-gray-700 text-gray-300 rounded hover:bg-gray-600 transition-colors text-sm"}," ‚è≠Ô∏è –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å —à–∞–≥ "),t("button",{onClick:at,class:"w-full p-2 bg-orange-600 text-white rounded hover:bg-orange-700 transition-colors text-sm"}," üÜò –ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å "),t("button",{onClick:nt,class:"w-full p-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors text-sm"}," üîÑ –ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ ")])]),e(d).length>1?(r(),n("div",de,[o[8]||(o[8]=t("h3",{class:"text-white font-medium mb-3"},"–í—Å–µ —à–∞–≥–∏:",-1)),t("div",ue,[(r(!0),n(K,null,U(e(d),(b,h)=>(r(),n("button",{key:b.id,onClick:xe=>st(h),class:W(["w-full p-2 rounded text-left text-sm transition-colors",h===e(i)?"bg-blue-600 text-white":h<e(i)?"bg-green-700 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},[t("div",ge,[t("span",null,a(h+1)+".",1),t("span",he,a(b.title),1),h<e(i)?(r(),n("span",_e,"‚úì")):h===e(i)?(r(),n("span",ve,"‚ñ∂")):v("",!0)])],10,pe))),128))])])):v("",!0)])])])])}}};export{Ce as default};
